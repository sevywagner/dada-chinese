{"version":3,"file":"static/js/492.75dd8f84.chunk.js","mappings":"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","sources":["components/blog/ImageUpload.js","pages/admin/NewBlog.js","webpack://dada-chinese/./src/components/sign-in/css/sign-in-form.module.css?61f8","webpack://dada-chinese/./src/pages/css/new-blog.module.css?fd2e"],"sourcesContent":["const ImageUpload = ({ onUpload, num }) => {\n    return (\n        <input type=\"file\" onChange={(event) => onUpload(event, num)} />\n    );\n}\n\nexport default ImageUpload;","import { useRef, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport Button from \"../../components/util/Button\";\nimport styles from \"./../css/new-blog.module.css\";\nimport formStyles from \"./../../components/sign-in/css/sign-in-form.module.css\";\nimport mainStyles from './../../components/main.module.css';\nimport ImageUpload from \"../../components/blog/ImageUpload\";\n\nconst NewBlog = () => {\n  const [files, setFiles] = useState([null]);\n  const [error, setError] = useState();\n  const navigate = useNavigate();\n\n  const titleRef = useRef();\n  const contentRef = useRef();\n  const videoUrlRef = useRef();\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    const formData = new FormData();\n    formData.append('title', titleRef.current.value);\n    formData.append('content', contentRef.current.value);\n    for (const image of files) {\n      formData.append('image', image);\n    }\n    formData.append('videoUrl', videoUrlRef.current.value);\n    formData.append('date', new Date().toDateString());\n\n    let hasError = false;\n\n    fetch(\"https://dada-chinese-rest-api.herokuapp.com/posts\", {\n      method: \"POST\",\n      body: formData,\n      headers: {\n        Authorization: 'Bearer ' +  localStorage.getItem('token')\n      },\n    }).then((result) => {\n      if (!result.ok) {\n        hasError = true;\n      }\n\n      return result.json();\n    }).then((data) => {\n      console.log(data);\n      if (hasError) {\n        setError(data.error);\n      } else {\n        navigate('/blog');\n      }\n    }).catch((err) => console.log(err));\n  };\n\n  const fileHandler = (event, num) => {\n    setFiles((prevState) => {\n      prevState[num - 1] = event.target.files[0];\n      return prevState;\n    });\n  }\n\n  const [amountOfImages, setAmountOfImages] = useState([1]);\n\n  const addImageHandler = () => {\n      setAmountOfImages((prevState) => [...prevState, prevState.length + 1]);\n  }\n\n  useEffect(() => {\n      setFiles((prevState) => [...prevState, null]);\n      console.log(files);\n  }, [amountOfImages]);\n\n  return (\n    <div className={styles.root}>\n      <p className={mainStyles.title}>New Blog Entry</p>\n      <a href=\"https://dada-chinese-rest-api.herokuapp.com/auth/google\">Authenticate yourself</a>\n      {error && <p className={mainStyles.error}>{error}</p>}\n      <form className={styles.form} onSubmit={submitHandler}>\n        <div className={formStyles.block}>\n          <label>Title</label>\n          <input type=\"text\" ref={titleRef} />\n        </div>\n        <div className={formStyles.block}>\n          {amountOfImages.map((num) => <ImageUpload key={num} onUpload={fileHandler} num={num} />)}\n        </div>\n        <button type=\"button\" onClick={addImageHandler}>Add another image</button>\n        <div className={formStyles.block}>\n          <label>Video Url</label>\n          <input type=\"text\" ref={videoUrlRef} />\n        </div>\n        <div className={formStyles.block}>\n          <label>Content</label>\n          <textarea className={styles.textarea} ref={contentRef}></textarea>\n        </div>\n        <div className={styles.center}>\n            <Button type=\"submit\">Add blog</Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default NewBlog;","// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"sign-in-form_wrap__uyA1X\",\"block\":\"sign-in-form_block__sFmMD\",\"invalid\":\"sign-in-form_invalid__Fj2iK\",\"inputs\":\"sign-in-form_inputs__MVwqR\",\"input-field\":\"sign-in-form_input-field__tLrji\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"new-blog_form__igf5g\",\"wrap\":\"new-blog_wrap__8K6mA\",\"root\":\"new-blog_root__zNqEj\",\"center\":\"new-blog_center__2s6Ox\",\"textarea\":\"new-blog_textarea__URmiA\"};"],"names":["onUpload","num","type","onChange","event","useState","files","setFiles","error","setError","navigate","useNavigate","titleRef","useRef","contentRef","videoUrlRef","fileHandler","prevState","target","amountOfImages","setAmountOfImages","useEffect","console","log","className","styles","mainStyles","href","onSubmit","preventDefault","formData","FormData","append","current","value","image","Date","toDateString","hasError","fetch","method","body","headers","Authorization","localStorage","getItem","then","result","ok","json","data","catch","err","formStyles","ref","map","onClick","length","Button"],"sourceRoot":""}
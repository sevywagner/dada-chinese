"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[328],{6328:function(e,t,n){n.r(t);var r=n(9439),s=n(2791),o=n(9434),a=n(7689),c=n(2845),i=n(7558),l=n(3264),u=n(2626),h=n(184);t.default=function(){var e=(0,s.useState)(!1),t=(0,r.Z)(e,2),n=t[0],d=t[1],p=(0,s.useState)(),f=(0,r.Z)(p,2),m=f[0],j=f[1],x=(0,o.v9)((function(e){return e.cart})),g=(0,o.I0)(),v=(0,a.s0)(),k=(0,s.useRef)(),b=(0,s.useRef)();return(0,s.useEffect)((function(){n&&setTimeout((function(){d(!1),v("/dada-chinese/")}),5e3)}),[n,v]),(0,h.jsx)("div",{children:n?(0,h.jsx)("div",{children:(0,h.jsx)("p",{className:l.Z.title,children:"Your order has been placed!"})}):(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:l.Z.title,children:"Last Thing..."}),!m&&(0,h.jsx)("p",{className:l.Z.subtitle,children:"Please enter your Address"}),m&&(0,h.jsx)("p",{className:l.Z.error,children:m}),(0,h.jsx)("div",{className:l.Z.wrap,children:(0,h.jsxs)("form",{className:u.Z.form,onSubmit:function(e){e.preventDefault();var t=""!==b.current.value.trim()?k.current.value+" Apt #: "+b.current.value:k.current.value,n=!1;fetch("https://dada-chinese-rest-api.herokuapp.com/shop/new-order",{method:"PUT",body:JSON.stringify({items:x.items,totalPrice:x.totalPrice,address:t}),headers:{"Content-Type":"Application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.ok||(n=!0),e.json()})).then((function(e){n?j(e.error):(console.log(e.message),fetch("https://dada-chinese-rest-api.herokuapp.com/shop/order-email",{method:"POST",body:JSON.stringify({cartItems:x.items}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){if(e.ok)return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),g(i.U.resetCart()),d(!0))})).catch((function(e){j(e.message),console.log(e)}))},children:[(0,h.jsx)("label",{children:"Address"}),(0,h.jsx)("input",{type:"text",ref:k}),(0,h.jsx)("label",{children:"Apt # (optional)"}),(0,h.jsx)("input",{type:"text",ref:b}),(0,h.jsx)(c.Z,{type:"submit",children:"Finish Order"})]})})]})})}},2626:function(e,t){t.Z={wrap:"checkout_wrap__qFQpx",form:"checkout_form__8VUDs"}}}]);
//# sourceMappingURL=328.e7dcc8b0.chunk.js.map
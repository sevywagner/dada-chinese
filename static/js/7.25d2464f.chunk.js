"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[7],{270:function(e,n,a){var r=a(9439),s=a(2791);n.Z=function(e){var n=(0,s.useState)(""),a=(0,r.Z)(n,2),i=a[0],l=a[1],t=(0,s.useState)(!1),o=(0,r.Z)(t,2),u=o[0],d=o[1],c=e(i);return{value:i,isValid:c,hasError:!c&&u,blurHandler:function(){d(!0)},valueChangeHandler:function(e){l(e.target.value)},reset:function(){l(""),d(!1)}}}},6007:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var r=a(9439),s=a(3264),i="sign-in_root__97RE8",l="sign-in_elevate__vTr2y",t="sign-in_form__Cuhq7",o=a(2791),u=a(4347),d=a(7689),c=a(2352),h=a(2845),m=a(184),p=function(){var e=(0,o.useState)(),n=(0,r.Z)(e,2),a=n[0],s=n[1],i=(0,d.s0)(),l=(0,o.useContext)(u.g),t=(0,o.useRef)(),p=(0,o.useRef)();return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{className:c.Z.form,onSubmit:function(e){var n;e.preventDefault(),fetch("https://dada-chinese-rest-api.herokuapp.com/auth/login",{method:"POST",body:JSON.stringify({email:t.current.value,password:p.current.value}),headers:{"Content-Type":"application/json"}}).then((function(e){return n=!!e.ok,e.json()})).then((function(e){if(!n)return s(e.error);l.loginHandler(e.token,e.expiration),i("/dada-chinese")})).catch((function(e){console.log(e.message)}))},children:[a&&(0,m.jsx)("p",{children:a}),(0,m.jsxs)("div",{className:c.Z.inputs,children:[(0,m.jsxs)("div",{className:c.Z.block,children:[(0,m.jsx)("label",{children:"Email"}),(0,m.jsx)("input",{type:"text",ref:t})]}),(0,m.jsxs)("div",{className:c.Z.block,children:[(0,m.jsx)("label",{children:"Password"}),(0,m.jsx)("input",{type:"password",ref:p})]})]}),(0,m.jsx)(h.Z,{type:"submit",children:"Log in"})]})})},f=a(270),v=function(e){var n=e.errorHandler,a=(0,d.s0)(),r=(0,f.Z)((function(e){return""!==e.trim()})),s=r.value,i=r.isValid,l=r.hasError,t=r.valueChangeHandler,o=r.blurHandler,u=r.reset,p=(0,f.Z)((function(e){return e.includes("@")})),v=p.value,g=p.isValid,j=p.hasError,x=p.valueChangeHandler,b=p.blurHandler,Z=p.reset,_=(0,f.Z)((function(e){return e.trim().length>=8})),w=_.value,N=_.isValid,C=_.hasError,y=_.valueChangeHandler,H=_.blurHandler,k=_.reset,S=(0,f.Z)((function(e){return""!==e.trim()})),E=S.value,P=S.isValid,T=S.hasError,V=S.valueChangeHandler,F=S.blurHandler,B=S.reset,R={name:l?c.Z.invalid:"",email:j?c.Z.invalid:"",password:C?c.Z.invalid:"",password2:T?c.Z.invalid:""};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{onSubmit:function(e){var r;(e.preventDefault(),i)?g?N?i&&g&&N&&P?fetch("https://dada-chinese-rest-api.herokuapp.com/auth/signup",{method:"PUT",body:JSON.stringify({name:s,email:v,password:w,confirmPassword:E}),headers:{"Content-Type":"application/json"}}).then((function(e){return r=!!e.ok,e.json()})).then((function(e){if(!r)return n(e.error);u(),Z(),k(),B(),n(null),a("/dada-chinese/sign-in")})).catch((function(e){console.log(e)})):n("Invalid Credentials"):n("Please enter a valid password"):n("Please enter a valid email"):n("Please enter a valid email")},children:[(0,m.jsx)("label",{className:c.Z.label,children:"Name"}),(0,m.jsx)("input",{className:R.name,type:"text",onChange:t,onBlur:o,value:s,name:"name",placeholder:"Full name"}),(0,m.jsx)("label",{className:c.Z.label,children:"Email"}),(0,m.jsx)("input",{className:R.email,type:"text",onChange:x,onBlur:b,value:v,name:"email",placeholder:"test@test.com"}),(0,m.jsx)("label",{className:c.Z.label,children:"Set password"}),(0,m.jsx)("input",{className:R.password,type:"password",onChange:y,onBlur:H,value:w,name:"password",placeholder:"Must be 8 characters and include a number"}),(0,m.jsx)("label",{className:c.Z.label,children:"Confirm password"}),(0,m.jsx)("input",{className:R.password,type:"password",onChange:V,onBlur:F,value:E,name:"password2"}),(0,m.jsx)(h.Z,{className:c.Z.submit,type:"submit",children:"Submit"})]})})},g=function(e){var n=e.mode,a=(0,d.TH)(),u=(0,o.useState)(),c=(0,r.Z)(u,2),h=c[0],f=c[1],g=function(e){f(e)};return(0,o.useEffect)((function(){f(null)}),[a.pathname]),(0,m.jsx)("div",{className:i,children:(0,m.jsxs)("div",{className:l,children:[(0,m.jsxs)("p",{className:s.Z.title,children:["Sign ","register"===n?"up":"in"]}),h&&(0,m.jsx)("p",{children:h}),"login"===n&&(0,m.jsx)("div",{className:t,children:(0,m.jsx)(p,{errorHandler:g})}),"register"===n&&(0,m.jsx)("div",{className:t,children:(0,m.jsx)(v,{errorHandler:g})})]})})}},2352:function(e,n){n.Z={wrap:"sign-in-form_wrap__uyA1X",block:"sign-in-form_block__sFmMD",invalid:"sign-in-form_invalid__Fj2iK",inputs:"sign-in-form_inputs__MVwqR","input-field":"sign-in-form_input-field__tLrji"}}}]);
//# sourceMappingURL=7.25d2464f.chunk.js.map
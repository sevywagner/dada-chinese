{"version":3,"file":"static/js/110.2988e250.chunk.js","mappings":"2MA4GA,UAnGqB,WACnB,OAAwBA,EAAAA,EAAAA,YAAU,eAA3BC,EAAI,KAAEC,EAAO,KACdC,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,MAETC,GAAWC,EAAAA,EAAAA,UACXC,GAAaD,EAAAA,EAAAA,UACbE,GAAcF,EAAAA,EAAAA,UAGdG,GADQC,EAAAA,EAAAA,MACWC,MAAK,SAACC,GAAC,OAAKA,EAAEC,MAAQV,EAAOW,MAAM,IAuD5D,OACE,0BACE,iBAAKC,UAAWC,EAAAA,EAAAA,KAAY,WAC1B,cAAGD,UAAWE,EAAAA,EAAAA,MAAiB,SAAC,eAChC,kBAAMF,UAAWC,EAAAA,EAAAA,KAAaE,SAzDd,SAACC,GAGrB,IAAIC,EAFJD,EAAME,iBAKJD,EAD6B,KAA3Bf,EAASiB,QAAQC,MACXd,EAAWW,MAEXf,EAASiB,QAAQC,MAG3BC,QAAQC,IAAIjB,EAAYc,QAAQC,OAEhC,IASIG,EATEC,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAAST,GACzBO,EAASE,OAAO,sBAAuBpB,EAAWqB,qBAClDH,EAASE,OAAO,QAAS9B,GACzB4B,EAASE,OAAO,WAAarB,EAAYc,QAAQC,MAA8Bf,EAAYc,QAAQC,MAA1Cd,EAAWsB,UACpEJ,EAASE,OAAO,UAAWtB,EAAWe,QAAQC,OAC9CI,EAASE,OAAO,OAAQpB,EAAWuB,MACnCL,EAASE,OAAO,KAAMpB,EAAWI,KAIjCoB,MAAM,wDAAyD,CAC7DC,OAAQ,MACRC,KAAMR,EACNS,QAAS,CACPC,cAAe,UAAYC,aAAaC,QAAQ,YAEjDC,MAAK,SAACC,GAOP,OANKA,EAAOC,IAGVhB,GAAe,EACfzB,EAAS,uBAHTyB,GAAe,EAKVe,EAAOE,MAChB,IAAGH,MAAK,SAACI,GACHlB,EACFF,QAAQC,IAAImB,EAAKC,SAEjBrB,QAAQC,IAAImB,EAAKE,MAErB,IAAGC,OAAM,SAACC,GACRxB,QAAQC,IAAIuB,EACd,GACF,EAU4D,WACpD,iBAAKjC,UAAWkC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,WACP,kBAAOC,KAAK,OAAOC,IAAK9C,EAAU+C,YAAa3C,EAAWW,YAE5D,iBAAKL,UAAWkC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,WACP,kBAAOC,KAAK,OAAOG,SAfT,SAAClC,GACnBnB,EAAQmB,EAAMmC,OAAOC,MAAM,GAC7B,EAamDC,K,iBAE3C,iBAAKzC,UAAWkC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,eACP,kBAAOC,KAAK,OAAOC,IAAK3C,QAE1B,iBAAKO,UAAWkC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,aACP,qBACElC,UAAWC,EAAAA,EAAAA,SACXmC,IAAK5C,EACLkD,aAAchD,EAAWiD,cAG7B,gBAAK3C,UAAWC,EAAAA,EAAAA,OAAc,UAC5B,SAAC,IAAM,CAACkC,KAAK,SAAQ,SAAC,sBAMlC,C,qBCzGA,KAAgB,KAAO,2BAA2B,MAAQ,4BAA4B,QAAU,8BAA8B,OAAS,6BAA6B,cAAc,kC,qBCAlL,KAAgB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,OAAS,yBAAyB,SAAW,2B","sources":["pages/admin/EditPostPage.js","webpack://dada-chinese/./src/components/sign-in/css/sign-in-form.module.css?61f8","webpack://dada-chinese/./src/pages/css/new-blog.module.css?fd2e"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\nimport { useLoaderData } from \"react-router\";\n\nimport Button from \"../../components/util/Button\";\nimport styles from \"./../css/new-blog.module.css\";\nimport mainStyles from './../../components/main.module.css';\nimport formStyles from \"./../../components/sign-in/css/sign-in-form.module.css\";\n\nconst EditPostPage = () => {\n  const [file, setFile] = useState();\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const titleRef = useRef();\n  const contentRef = useRef();\n  const videoUrlRef = useRef();\n\n  const posts = useLoaderData();\n  const targetPost = posts.find((p) => p._id === params.postId);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    let title;\n\n    if (titleRef.current.value === \"\") {\n      title = targetPost.title;\n    } else {\n      title = titleRef.current.value;\n    }\n\n    console.log(videoUrlRef.current.value);\n\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"imageWebContentLink\", targetPost.imageWebContentLink);\n    formData.append(\"image\", file);\n    formData.append('videoUrl', !videoUrlRef.current.value ? targetPost.videoUrl : videoUrlRef.current.value);\n    formData.append(\"content\", contentRef.current.value);\n    formData.append(\"date\", targetPost.date);\n    formData.append(\"id\", targetPost._id);\n\n    let responseIsOk;\n\n    fetch(\"https://dada-chinese-rest-api.herokuapp.com/edit-post\", {\n      method: \"PUT\",\n      body: formData,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    }).then((result) => {\n      if (!result.ok) {\n        responseIsOk = false;\n      } else {\n        responseIsOk = true;\n        navigate(\"/dada-chinese/blog\");\n      }\n      return result.json();\n    }).then((data) => {\n      if (responseIsOk) {\n        console.log(data.message);\n      } else {\n        console.log(data.error);\n      }\n    }).catch((err) => {\n      console.log(err);\n    });\n  };\n\n  const fileHandler = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  return (\n    <div>\n      <div className={styles.root}>\n        <p className={mainStyles.title}>Edit Blog</p>\n        <form className={styles.form} onSubmit={submitHandler}>\n          <div className={formStyles.block}>\n            <label>Title</label>\n            <input type=\"text\" ref={titleRef} placeholder={targetPost.title} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Image</label>\n            <input type=\"file\" onChange={fileHandler.bind(this)} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Video Url</label>\n            <input type=\"text\" ref={videoUrlRef} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Content</label>\n            <textarea\n              className={styles.textarea}\n              ref={contentRef}\n              defaultValue={targetPost.content}\n            ></textarea>\n          </div>\n          <div className={styles.center}>\n            <Button type=\"submit\">Add blog</Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default EditPostPage;","// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"sign-in-form_wrap__uyA1X\",\"block\":\"sign-in-form_block__sFmMD\",\"invalid\":\"sign-in-form_invalid__Fj2iK\",\"inputs\":\"sign-in-form_inputs__MVwqR\",\"input-field\":\"sign-in-form_input-field__tLrji\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"new-blog_form__igf5g\",\"wrap\":\"new-blog_wrap__8K6mA\",\"root\":\"new-blog_root__zNqEj\",\"center\":\"new-blog_center__2s6Ox\",\"textarea\":\"new-blog_textarea__URmiA\"};"],"names":["useState","file","setFile","navigate","useNavigate","params","useParams","titleRef","useRef","contentRef","videoUrlRef","targetPost","useLoaderData","find","p","_id","postId","className","styles","mainStyles","onSubmit","event","title","preventDefault","current","value","console","log","responseIsOk","formData","FormData","append","imageWebContentLink","videoUrl","date","fetch","method","body","headers","Authorization","localStorage","getItem","then","result","ok","json","data","message","error","catch","err","formStyles","type","ref","placeholder","onChange","target","files","bind","defaultValue","content"],"sourceRoot":""}
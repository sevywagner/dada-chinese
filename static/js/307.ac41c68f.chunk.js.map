{"version":3,"file":"static/js/307.ac41c68f.chunk.js","mappings":"iJACA,MAAuB,4BAAvB,EAA0D,4BAA1D,EAA8F,6BAA9F,EAAmI,6BAAnI,EAA2K,gCAA3K,EAAqN,+BAArN,EAAqQ,sCAArQ,EAAsT,gCAAtT,EAAqW,oC,SCyBrW,EAxByB,SAAH,GAA0C,IAApCA,EAAK,EAALA,MAAOC,EAAK,EAALA,MAAOC,EAAQ,EAARA,SAAUC,EAAI,EAAJA,KAChD,OACI,+BACI,iBAAKC,UAAWC,EAAY,WACxB,oBAASD,UAAWD,EAAOE,EAAiBA,EAAuB,UAC/D,cAAGD,UAAWC,EAAa,SAAEL,OAEjC,oBAASI,UAAWD,EAAOE,EAA2BA,EAAe,UACjE,iBAAKD,UAAWD,EAAOE,EAAcA,EAAmB,UACnDH,EAAW,IAAK,eAAGE,UAAWC,EAAgB,UAAC,IAAEH,KACjDD,GAAQ,eAAGG,UAAWC,EAAa,UAAC,IAAEJ,MAAa,cAAGG,UAAWC,EAAa,SAAC,eAGvFF,IAAQ,oBAASC,UAAWC,EAAe,UACxC,iBAAKD,UAAWC,EAAY,WACxB,uBAAIF,EAAKG,MAAM,KAAK,MACpB,uBAAIH,EAAKG,MAAM,KAAK,cAM5C,C,uJCsBA,EAzCe,SAAH,GAAoC,IAA9BC,EAAW,EAAXA,YAAaC,EAAS,EAATA,UACrBC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MA8BjB,OACI,SAAC,KAAoB,CAACC,QAAS,CAC3B,YAAaC,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYC,4BAC3B,UACE,SAAC,KAAa,CAACC,YAhCI,SAACC,EAAMC,GAC9B,OAAOA,EAAQC,MAAMC,OAAO,CACxBC,eAAgB,CACZ,CACIC,YAAa,+CACbC,OAAQ,CACJC,cAAe,MACfC,MAAOC,SAASnB,QAI7BoB,MAAK,SAACR,GACL,OAAOA,CACX,GACJ,EAkBwDX,UAhBjC,SAACS,EAAMC,GAC1B,OAAOA,EAAQC,MAAMS,UAAUD,MAAK,WAChCnB,IACAG,EAAS,uBACTF,EAASoB,EAAAA,EAAAA,UAAsB,CAAEC,MAAyC,OAAlCC,aAAaC,QAAQ,WACjE,GACJ,EAUmFC,QAR9D,SAACC,GAClBC,QAAQC,IAAIF,EAChB,KASJ,E,oBC3CA,GAAgB,KAAO,uBAAuB,KAAO,uBAAuB,QAAU,0BAA0B,SAAW,2BAA2B,MAAQ,wBAAwB,YAAc,8BAA8B,QAAU,0BAA0B,YAAY,4BAA4B,WAAW,2BAA2B,MAAQ,wBAAwB,gBAAgB,gCAAgC,OAAS,yBAAyB,MAAQ,wBAAwB,KAAO,wBCsK7e,G,QA3JiB,WACb,IAAMG,GAAOC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMF,IAAI,IAE9C,GAAoCG,EAAAA,EAAAA,WAAS,GAAM,eAA5CC,EAAU,KAAEC,EAAa,KAChC,GAAgCF,EAAAA,EAAAA,YAAU,eAAnCG,EAAQ,KAAEC,EAAW,KAC5B,GAAoCJ,EAAAA,EAAAA,UAASH,EAAKQ,YAAW,eAAtDA,EAAU,KAAEC,EAAa,KAE1BC,EAAWV,EAAKW,MAAMC,WAAU,SAACC,GAAI,MAAiB,OAAZA,EAAKC,EAAW,IAG1D1C,IADWG,EAAAA,EAAAA,OACAF,EAAAA,EAAAA,OAEX0C,GAAaC,EAAAA,EAAAA,UACbC,GAAYD,EAAAA,EAAAA,UACZE,GAAUF,EAAAA,EAAAA,UACVG,GAAWH,EAAAA,EAAAA,UA8DXI,EAAiB,SAACC,GAGpB,GAFAA,EAAMC,kBAEa,IAAdZ,GAAuD,KAApCK,EAAWQ,QAAQnC,MAAMoC,SAAoB9B,aAAaC,QAAQ,WAA+C,KAAjCuB,EAAQK,QAAQnC,MAAMoC,QAAmD,KAAlCL,EAASI,QAAQnC,MAAMoC,QAClK,OAAOjB,EAAY,4CAEvBF,GAAc,SAACoB,GAAS,OAAMA,CAAS,GAC3C,EAMA,OAJAC,EAAAA,EAAAA,YAAU,WACNjB,EAAcT,EAAKQ,WACvB,GAAG,CAACR,EAAKQ,cAGL,iCACI,cAAGzC,UAAW4D,EAAAA,EAAAA,MAAiB,SAAC,cAChC,gBAAK5D,UAAWC,EAAAA,KAAY,UACxB,iBAAKD,UAAWC,EAAAA,YAAmB,WAC/B,iBAAKD,UAAWC,EAAAA,aAAoB,WAChC,cAAGD,UAAWC,EAAAA,QAAe,SAAC,YAC7BgC,EAAKW,MAAMiB,KAAI,SAACf,GAAI,OACjB,SAACgB,EAAA,EAAgB,CAEblE,MAAOkD,EAAKlD,MACZC,MAAOiD,EAAKjD,MACZC,SAAUgD,EAAKhD,SACfC,KAAM+C,EAAK/C,MAJN+C,EAAKlD,MAKZ,KAEN,iBAAKI,UAAWC,EAAAA,MAAa,WACzB,cAAGD,UAAWC,EAAAA,YAAsB,SAAC,YACrC,eAAGD,UAAWC,EAAAA,YAAsB,UAAC,IAAEwC,YAG/C,iBAAKzC,UAAWC,EAAAA,QAAe,UAC1BsC,IAAY,cAAGvC,UAAW4D,EAAAA,EAAAA,MAAiB,SAAErB,KAC9C,kBAAMvC,UAAWC,EAAAA,KAAa8D,SAAUV,EAAe,WACjD1B,aAAaC,QAAQ,WAAY,iBAAK5B,UAAWC,EAAAA,cAAwB,WACvE,cAAGD,UAAWC,EAAAA,SAAgB,SAAC,gBAE/B,iCACI,4BAAQ,UACR,kBAAO+D,KAAK,OAAOhE,UAAWC,EAAAA,MAAcgE,KAAK,OAAOC,IAAKf,QAGjE,iCACI,4BAAQ,WACR,kBAAOa,KAAK,QAAQhE,UAAWC,EAAAA,MAAcgE,KAAK,OAAOC,IAAKd,WAGvD,IAAdT,IAAmB,iBAAK3C,UAAWC,EAAAA,cAAwB,WACxD,cAAGD,UAAWC,EAAAA,SAAgB,SAAC,mBAE/B,iCACI,4BAAQ,aACR,kBAAO+D,KAAK,UAAUhE,UAAWC,EAAAA,MAAcgE,KAAK,OAAOC,IAAKlB,QAGpE,iCACI,4BAAQ,sBACR,kBAAOiB,KAAK,OAAOjE,UAAWC,EAAAA,MAAciE,IAAKhB,WAGzD,gBAAKlD,UAAWC,EAAAA,KAAY,SACtB0B,aAAaC,QAAQ,WAA0B,IAAde,IAAoB,cAAG3C,UAAW4D,EAAAA,EAAAA,MAAiB,SAAC,4CAE3F,gBAAK5D,UAAWC,EAAAA,KAAY,SACtBoC,EAA4E,IAAfI,IAAoB,SAAC,EAAM,CAACrC,UA/HjG,WAClB,IAAI+D,EAAU,IACI,IAAdxB,IACAwB,EAA6C,KAAnCjB,EAAUM,QAAQnC,MAAMoC,OAAgBT,EAAWQ,QAAQnC,MAAQ,WAAa6B,EAAUM,QAAQnC,MAAQ2B,EAAWQ,QAAQnC,OAE3I,IAAIS,GAAQ,EAIPH,aAAaC,QAAQ,UACdwB,EAASI,QAAQnC,MAG7B,IAAI+C,EAAOC,KAAKC,UAAU,CACtB1B,MAAOX,EAAKW,MACZH,WAAYR,EAAKQ,WACjB0B,QAAAA,IAGAI,EAAYF,KAAKC,UAAU,CAC3B1B,MAAOX,EAAKW,MACZH,WAAYR,EAAKQ,WACjB0B,QAASA,EACTH,KAAOrC,aAAaC,QAAQ,SAAmC,GAAxBuB,EAAQK,QAAQnC,MACvDmD,MAAQ7C,aAAaC,QAAQ,SAAoC,GAAzBwB,EAASI,QAAQnC,QAGvDoD,EAAU,CACZ,eAAgB,mBAChBC,cAAe,UAAY/C,aAAaC,QAAQ,UAOpD+C,MAAwC,OAAlChD,aAAaC,QAAQ,SA9BjB,6DACK,mEA6BgD,CAC3DgD,OAAQ,MACRR,KAAwC,OAAlCzC,aAAaC,QAAQ,SAAoBwC,EAAOG,EACtDE,QAA2C,OAAlC9C,aAAaC,QAAQ,SAAoB6C,EAPjC,CACjB,eAAgB,sBAOjBlD,MAAK,SAACsD,GAKL,OAJKA,EAAOC,KACRhD,GAAQ,GAGL+C,EAAOE,MAClB,IAAGxD,MAAK,SAACV,GACDiB,EACAU,EAAY3B,EAAKiB,OAGjBzB,EAASoB,EAAAA,EAAAA,YAEjB,IAAGuD,OAAM,SAACC,GACNzC,EAAYyC,EAAIC,SAChBnD,QAAQC,IAAIiD,EAChB,GACJ,EAsEiJ9E,YAAasC,KAAnH,SAAC0C,EAAA,EAAM,CAACC,QAAS/B,EAAe,SAAC,uBAShF,E","sources":["webpack://dada-chinese/./src/components/cart/css/checkout-item.module.css?6584","components/cart/CheckoutCartItem.js","components/cart/Paypal.js","webpack://dada-chinese/./src/pages/css/checkout.module.css?c1f4","pages/Checkout.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"item\":\"checkout-item_item__ds-f5\",\"wrap\":\"checkout-item_wrap__xvNEG\",\"title\":\"checkout-item_title__Q75xj\",\"price\":\"checkout-item_price__Q4+Ir\",\"quantity\":\"checkout-item_quantity__R6c8N\",\"section\":\"checkout-item_section__Gu457\",\"middle-section\":\"checkout-item_middle-section__Qunet\",\"mid-wrap\":\"checkout-item_mid-wrap__KLH5b\",\"half-section\":\"checkout-item_half-section__WOtWb\"};","import styles from './css/checkout-item.module.css';\n\nconst CheckoutCartItem = ({ title, price, quantity, time }) => {\n    return (\n        <>\n            <div className={styles.item}>\n                <section className={time ? styles.section : styles['half-section']}>\n                    <p className={styles.title}>{title}</p>\n                </section>\n                <section className={time ? styles['middle-section'] : styles.section}>\n                    <div className={time ? styles.wrap : styles['mid-wrap']}>\n                        {quantity > 1 && <p className={styles.quantity}>x{quantity}</p>}\n                        {price ? <p className={styles.price}>${price}</p> : <p className={styles.price}>Price</p>}\n                    </div>\n                </section>\n                {time && <section className={styles.section}>\n                    <div className={styles.wrap}>\n                        <p>{time.split(' ')[0]}</p>\n                        <p>{time.split(' ')[1]}</p>\n                    </div>\n                </section>}\n            </div>\n        </>\n    );\n}\n\nexport default CheckoutCartItem;","import { PayPalButtons, PayPalScriptProvider } from \"@paypal/react-paypal-js\";\nimport { useNavigate } from \"react-router\";\nimport { cartActions } from \"../../store/redux/cart\";\nimport { useDispatch } from \"react-redux\";\n\nconst Paypal = ({ totalAmount, onApprove }) => {\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n\n    const createOrderHandler = (data, actions) => {\n        return actions.order.create({\n            purchase_units: [\n                {\n                    description: 'Credit for Dada Chinese Classes or Textbooks',\n                    amount: {\n                        currency_code: 'USD',\n                        value: parseInt(totalAmount)\n                    }\n                }\n            ]\n        }).then((order) => {\n            return order;\n        });\n    }\n\n    const approveHandler = (data, actions) => {\n        return actions.order.capture().then(() => {\n            onApprove();\n            navigate('/order-confirmation');\n            dispatch(cartActions.resetCart({ guest: localStorage.getItem('token') === null }));\n        });\n    }\n\n    const errorHandler = (error) => {\n        console.log(error);\n    }\n\n    return (\n        <PayPalScriptProvider options={{\n            \"client-id\": process.env.REACT_APP_PAYPAL_CLIENT_ID\n        }}>\n            <PayPalButtons createOrder={createOrderHandler} onApprove={approveHandler} onError={errorHandler} />\n        </PayPalScriptProvider>\n    );\n}\n\nexport default Paypal;","// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"checkout_wrap__qFQpx\",\"form\":\"checkout_form__8VUDs\",\"section\":\"checkout_section__IudwW\",\"subtitle\":\"checkout_subtitle__74zhl\",\"total\":\"checkout_total__8FLne\",\"total__text\":\"checkout_total__text__LDVRi\",\"summary\":\"checkout_summary__I3BxR\",\"list-wrap\":\"checkout_list-wrap__f35ZQ\",\"box-wrap\":\"checkout_box-wrap__HStVi\",\"input\":\"checkout_input__nBZ9u\",\"border-change\":\"checkout_border-change__cFH4P\",\"credit\":\"checkout_credit__IWI6i\",\"hover\":\"checkout_hover__LnPz9\",\"text\":\"checkout_text__offQM\"};","import { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router\";\n\nimport CheckoutCartItem from '../components/cart/CheckoutCartItem';\nimport Paypal from '../components/cart/Paypal';\nimport Button from '../components/util/Button';\nimport { cartActions } from \"../store/redux/cart\";\nimport mainStyles from './../components/main.module.css';\nimport styles from './css/checkout.module.css';\nimport formStyles from './../components/contact/css/contact-form.module.css';\n\nconst Checkout = () => {\n    const cart = useSelector((state) => state.cart);\n\n    const [showPaypal, setShowPaypal] = useState(false);\n    const [hasError, setHasError] = useState();\n    const [totalPrice, setTotalPrice] = useState(cart.totalPrice);\n\n    const textbook = cart.items.findIndex((item) => item.id === 't1');\n\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n    \n    const addressRef = useRef();\n    const aptNumRef = useRef();\n    const nameRef = useRef();\n    const emailRef = useRef();\n    \n    const submitHandler = () => {\n        let address = '';\n        if (textbook !== -1) {\n            address = aptNumRef.current.value.trim() !== '' ? addressRef.current.value + ' Apt #: ' + aptNumRef.current.value : addressRef.current.value;\n        }\n        let error = false;\n        let url = 'https://dada-chinese-rest-api.herokuapp.com/shop/new-order';\n        let guestUrl = 'https://dada-chinese-rest-api.herokuapp.com/shop/new-order-guest';\n        let email = null;\n        if (!localStorage.getItem('token')) {\n            email = emailRef.current.value;\n        }\n\n        let body = JSON.stringify({ \n            items: cart.items, \n            totalPrice: cart.totalPrice,\n            address\n        });\n\n        let guestBody = JSON.stringify({ \n            items: cart.items, \n            totalPrice: cart.totalPrice,\n            address: address,\n            name: !localStorage.getItem('token') ? nameRef.current.value : '',\n            email: !localStorage.getItem('token') ? emailRef.current.value : '',\n        });\n\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            Authorization: 'Bearer ' + localStorage.getItem('token')\n        }\n        \n        const guestHeaders = {\n            \"Content-Type\": \"application/json\"\n        }\n        \n        fetch(localStorage.getItem('token') !== null ? url : guestUrl, {\n            method: 'PUT',\n            body: localStorage.getItem('token') !== null ? body : guestBody,\n            headers: localStorage.getItem('token') !== null ? headers : guestHeaders\n        }).then((result) => {\n            if (!result.ok) {\n                error = true;\n            }\n            \n            return result.json();\n        }).then((data) => {\n            if (error) {\n                setHasError(data.error);\n                return;\n            } else {\n                dispatch(cartActions.resetCart());\n            }\n        }).catch((err) => {\n            setHasError(err.message);\n            console.log(err);\n        });\n    }\n\n\n    const toggleCheckout = (event) => {\n        event.preventDefault();\n\n        if ((textbook !== -1 && addressRef.current.value.trim() === '') || (!localStorage.getItem('token')) && (nameRef.current.value.trim() === '' || emailRef.current.value.trim() === '')) {\n            return setHasError('Please fill out the entirety of the form');\n        }\n        setShowPaypal((prevState) => !prevState);\n    }\n\n    useEffect(() => {\n        setTotalPrice(cart.totalPrice);\n    }, [cart.totalPrice]);\n\n    return (\n        <>\n            <p className={mainStyles.title}>Checkout</p>\n            <div className={styles.wrap}>\n                <div className={styles['box-wrap']}>\n                    <div className={styles['list-wrap']}>\n                        <p className={styles.summary}>Summary</p>\n                        {cart.items.map((item) => (\n                            <CheckoutCartItem \n                                key={item.title}\n                                title={item.title} \n                                price={item.price} \n                                quantity={item.quantity}\n                                time={item.time}\n                            />\n                        ))}\n                        <div className={styles.total}>\n                            <p className={styles['total__text']}>Total:</p>\n                            <p className={styles['total__text']}>${totalPrice}</p>\n                        </div>\n                    </div>\n                    <div className={styles.section}>\n                        {hasError && <p className={mainStyles.error}>{hasError}</p>}\n                        <form className={styles.form} onSubmit={toggleCheckout}>\n                            {!localStorage.getItem('token') && <div className={styles['form__section']}>\n                                <p className={styles.subtitle}>Basic Info</p>\n\n                                <fieldset>\n                                    <legend>Name</legend>\n                                    <input name=\"name\" className={styles.input} type=\"text\" ref={nameRef} />\n                                </fieldset>\n\n                                <fieldset>\n                                    <legend>Email</legend>\n                                    <input name=\"email\" className={styles.input} type=\"text\" ref={emailRef} />\n                                </fieldset>\n                            </div>}\n                            {textbook !== -1 && <div className={styles['form__section']}>\n                                <p className={styles.subtitle}>Shipping Info</p>\n\n                                <fieldset>\n                                    <legend>Address</legend>\n                                    <input name=\"address\" className={styles.input} type='text' ref={addressRef} />\n                                </fieldset>\n\n                                <fieldset>\n                                    <legend>Apt # (optional)</legend>\n                                    <input type='text' className={styles.input} ref={aptNumRef} />\n                                </fieldset>\n                            </div>}\n                            <div className={styles.text}>\n                                {(localStorage.getItem('token') && textbook === -1) && <p className={mainStyles.title}>Thank you for choosing Dada Chinese!</p>}\n                            </div>\n                            <div className={styles.wrap}>\n                                {!showPaypal ? <Button onClick={toggleCheckout}>Pay</Button> : totalPrice !== 0 && <Paypal onApprove={submitHandler} totalAmount={totalPrice} />}\n                                {/* {totalPrice === 0 && <Button onClick={submitHandler}>Continue</Button>} */}\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Checkout;"],"names":["title","price","quantity","time","className","styles","split","totalAmount","onApprove","dispatch","useDispatch","navigate","useNavigate","options","process","REACT_APP_PAYPAL_CLIENT_ID","createOrder","data","actions","order","create","purchase_units","description","amount","currency_code","value","parseInt","then","capture","cartActions","guest","localStorage","getItem","onError","error","console","log","cart","useSelector","state","useState","showPaypal","setShowPaypal","hasError","setHasError","totalPrice","setTotalPrice","textbook","items","findIndex","item","id","addressRef","useRef","aptNumRef","nameRef","emailRef","toggleCheckout","event","preventDefault","current","trim","prevState","useEffect","mainStyles","map","CheckoutCartItem","onSubmit","name","type","ref","address","body","JSON","stringify","guestBody","email","headers","Authorization","fetch","method","result","ok","json","catch","err","message","Button","onClick"],"sourceRoot":""}
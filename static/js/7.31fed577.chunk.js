"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[7],{270:function(e,n,s){var a=s(9439),r=s(2791);n.Z=function(e){var n=(0,r.useState)(""),s=(0,a.Z)(n,2),i=s[0],l=s[1],t=(0,r.useState)(!1),o=(0,a.Z)(t,2),u=o[0],c=o[1],d=e(i);return{value:i,isValid:d,hasError:!d&&u,blurHandler:function(){c(!0)},valueChangeHandler:function(e){l(e.target.value)},reset:function(){l(""),c(!1)}}}},6007:function(e,n,s){s.r(n),s.d(n,{default:function(){return v}});var a=s(3264),r="sign-in_root__97RE8",i="sign-in_elevate__vTr2y",l="sign-in_form__Cuhq7",t=s(9439),o=s(2791),u=s(4347),c=s(7689),d=s(2352),h=s(2845),m=s(184),p=function(){var e=(0,o.useState)(),n=(0,t.Z)(e,2),s=n[0],a=n[1],r=(0,c.s0)(),i=(0,o.useContext)(u.g),l=(0,o.useRef)(),p=(0,o.useRef)();console.log(i.isLoggedIn);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{className:d.Z.form,onSubmit:function(e){e.preventDefault(),fetch("https://dada-chinese-rest-api.herokuapp.com/auth/login",{method:"POST",body:JSON.stringify({email:l.current.value,password:p.current.value}),headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw a("Invalid Credentials"),new Error("Bad response");return e.json()})).then((function(e){console.log(e),i.loginHandler(e.token,e.expiration),r("/dada-chinese")})).catch((function(e){console.log(e.message)}))},children:[s&&(0,m.jsx)("p",{children:s}),(0,m.jsxs)("div",{className:d.Z.inputs,children:[(0,m.jsxs)("div",{className:d.Z.block,children:[(0,m.jsx)("label",{children:"Email"}),(0,m.jsx)("input",{type:"text",ref:l})]}),(0,m.jsxs)("div",{className:d.Z.block,children:[(0,m.jsx)("label",{children:"Password"}),(0,m.jsx)("input",{type:"password",ref:p})]})]}),(0,m.jsx)(h.Z,{type:"submit",children:"Log in"})]})})},f=s(270),g=function(e){e.onSubmit;var n=(0,o.useState)({hasError:!1,message:""}),s=(0,t.Z)(n,2),a=s[0],r=s[1],i=(0,f.Z)((function(e){return""!==e.trim()})),l=i.value,u=i.isValid,c=i.hasError,p=i.valueChangeHandler,g=i.blurHandler,v=i.reset,x=(0,f.Z)((function(e){return e.includes("@")})),j=x.value,b=x.isValid,Z=x.hasError,_=x.valueChangeHandler,w=x.blurHandler,N=x.reset,C=(0,f.Z)((function(e){return e.trim().length>=8&&(e.includes("!")||e.includes("@")||e.includes(".")||e.includes("/")||e.includes("(")||e.includes(")"))})),y=C.value,k=C.isValid,E=C.hasError,S=C.valueChangeHandler,H=C.blurHandler,V=C.reset,B=(0,f.Z)((function(e){return""!==e.trim()})),R=B.value,T=B.isValid,F=B.hasError,P=B.valueChangeHandler,D=B.blurHandler,I=B.reset,L={name:c?d.Z.invalid:"",email:Z?d.Z.invalid:"",password:E?d.Z.invalid:"",password2:F?d.Z.invalid:""};return(0,m.jsxs)(m.Fragment,{children:[a.hasError&&(0,m.jsx)("p",{children:a.message}),(0,m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u&&b&&k&&T?(fetch("https://dada-chinese-rest-api.herokuapp.com/auth/signup",{method:"PUT",body:JSON.stringify({name:l,email:j,password:y,confirmPassword:R}),headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Response error");return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),v(),N(),V(),I()):r({hasError:!0,message:"Invalid input"})},children:[(0,m.jsx)("label",{className:d.Z.label,children:"Name"}),(0,m.jsx)("input",{className:L.name,type:"text",onChange:p,onBlur:g,value:l,name:"name"}),(0,m.jsx)("label",{className:d.Z.label,children:"Email"}),(0,m.jsx)("input",{className:L.email,type:"text",onChange:_,onBlur:w,value:j,name:"email"}),(0,m.jsx)("label",{className:d.Z.label,children:"Set password"}),(0,m.jsx)("input",{className:L.password,type:"text",onChange:S,onBlur:H,value:y,name:"password"}),(0,m.jsx)("label",{className:d.Z.label,children:"Confirm password"}),(0,m.jsx)("input",{className:L.password,type:"text",onChange:P,onBlur:D,value:R,name:"password2"}),(0,m.jsx)(h.Z,{className:d.Z.submit,type:"submit",children:"Submit"})]})]})},v=function(e){var n=e.mode;return(0,m.jsx)("div",{className:r,children:(0,m.jsxs)("div",{className:i,children:[(0,m.jsxs)("p",{className:a.Z.title,children:["Sign ","register"===n?"up":"in"]}),"login"===n&&(0,m.jsx)("div",{className:l,children:(0,m.jsx)(p,{})}),"register"===n&&(0,m.jsx)("div",{className:l,children:(0,m.jsx)(g,{})})]})})}},2352:function(e,n){n.Z={wrap:"sign-in-form_wrap__uyA1X",block:"sign-in-form_block__sFmMD",invalid:"sign-in-form_invalid__Fj2iK",inputs:"sign-in-form_inputs__MVwqR","input-field":"sign-in-form_input-field__tLrji"}}}]);
//# sourceMappingURL=7.31fed577.chunk.js.map
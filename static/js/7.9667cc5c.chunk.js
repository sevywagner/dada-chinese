"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[7],{270:function(e,n,a){var s=a(9439),r=a(2791);n.Z=function(e){var n=(0,r.useState)(""),a=(0,s.Z)(n,2),l=a[0],i=a[1],t=(0,r.useState)(!1),o=(0,s.Z)(t,2),u=o[0],d=o[1],c=e(l);return{value:l,isValid:c,hasError:!c&&u,blurHandler:function(){d(!0)},valueChangeHandler:function(e){i(e.target.value)},reset:function(){i(""),d(!1)}}}},6007:function(e,n,a){a.r(n),a.d(n,{default:function(){return x}});var s=a(9439),r=a(3264),l="sign-in_root__97RE8",i="sign-in_elevate__vTr2y",t="sign-in_form__Cuhq7",o="sign-in_reset__25dhf",u=a(2791),d=a(4347),c=a(7689),h=a(2352),m=a(2845),p=a(184),f=function(){var e=(0,u.useState)(),n=(0,s.Z)(e,2),a=n[0],r=n[1],l=(0,c.s0)(),i=(0,u.useContext)(d.g),t=(0,u.useRef)(),o=(0,u.useRef)();return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{className:h.Z.form,onSubmit:function(e){var n;e.preventDefault(),fetch("http://localhost:8080/auth/login",{method:"POST",body:JSON.stringify({email:t.current.value,password:o.current.value}),headers:{"Content-Type":"application/json"}}).then((function(e){return n=!!e.ok,e.json()})).then((function(e){if(!n)return r(e.error);i.loginHandler(e.token,e.expiration),l("/")})).catch((function(e){console.log(e.message)}))},children:[a&&(0,p.jsx)("p",{children:a}),(0,p.jsxs)("div",{className:h.Z.inputs,children:[(0,p.jsxs)("div",{className:h.Z.block,children:[(0,p.jsx)("label",{children:"Email"}),(0,p.jsx)("input",{type:"text",ref:t})]}),(0,p.jsxs)("div",{className:h.Z.block,children:[(0,p.jsx)("label",{children:"Password"}),(0,p.jsx)("input",{type:"password",ref:o})]})]}),(0,p.jsx)(m.Z,{type:"submit",children:"Log in"})]})})},v=a(270),g=function(e){var n=e.errorHandler,a=(0,c.s0)(),s=(0,v.Z)((function(e){return""!==e.trim()})),r=s.value,l=s.isValid,i=s.hasError,t=s.valueChangeHandler,o=s.blurHandler,u=s.reset,d=(0,v.Z)((function(e){return e.includes("@")})),f=d.value,g=d.isValid,j=d.hasError,x=d.valueChangeHandler,b=d.blurHandler,_=d.reset,Z=(0,v.Z)((function(e){return e.trim().length>=8})),w=Z.value,N=Z.isValid,C=Z.hasError,y=Z.valueChangeHandler,H=Z.blurHandler,k=Z.reset,S=(0,v.Z)((function(e){return""!==e.trim()})),E=S.value,P=S.isValid,F=S.hasError,T=S.valueChangeHandler,V=S.blurHandler,R=S.reset,B={name:i?h.Z.invalid:"",email:j?h.Z.invalid:"",password:C?h.Z.invalid:"",password2:F?h.Z.invalid:""};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{onSubmit:function(e){var s;(e.preventDefault(),l)?g?N?l&&g&&N&&P?fetch("https://dada-chinese-rest-api.herokuapp.com/auth/signup",{method:"PUT",body:JSON.stringify({name:r,email:f,password:w,confirmPassword:E}),headers:{"Content-Type":"application/json"}}).then((function(e){return s=!!e.ok,e.json()})).then((function(e){if(!s)return n(e.error);u(),_(),k(),R(),n(null),a("/sign-in")})).catch((function(e){console.log(e)})):n("Invalid Credentials"):n("Please enter a valid password"):n("Please enter a valid email"):n("Please enter a valid email")},children:[(0,p.jsx)("label",{className:h.Z.label,children:"Name"}),(0,p.jsx)("input",{className:B.name,type:"text",onChange:t,onBlur:o,value:r,name:"name",placeholder:"Full name"}),(0,p.jsx)("label",{className:h.Z.label,children:"Email"}),(0,p.jsx)("input",{className:B.email,type:"text",onChange:x,onBlur:b,value:f,name:"email",placeholder:"test@test.com"}),(0,p.jsx)("label",{className:h.Z.label,children:"Set password"}),(0,p.jsx)("input",{className:B.password,type:"password",onChange:y,onBlur:H,value:w,name:"password",placeholder:"Must be 8 characters and include a number"}),(0,p.jsx)("label",{className:h.Z.label,children:"Confirm password"}),(0,p.jsx)("input",{className:B.password,type:"password",onChange:T,onBlur:V,value:E,name:"password2"}),(0,p.jsx)(m.Z,{className:h.Z.submit,type:"submit",children:"Submit"})]})})},j=a(1087),x=function(e){var n=e.mode,a=(0,c.TH)(),d=(0,u.useState)(),h=(0,s.Z)(d,2),m=h[0],v=h[1],x=function(e){v(e)};return(0,u.useEffect)((function(){v(null)}),[a.pathname]),(0,p.jsx)("div",{className:l,children:(0,p.jsxs)("div",{className:i,children:[(0,p.jsxs)("p",{className:r.Z.title,children:["Sign ","register"===n?"up":"in"]}),m&&(0,p.jsx)("p",{children:m}),"login"===n&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:t,children:(0,p.jsx)(f,{errorHandler:x})}),(0,p.jsx)(j.rU,{className:o,to:"/reset-password",children:"Reset Password"})]}),"register"===n&&(0,p.jsx)("div",{className:t,children:(0,p.jsx)(g,{errorHandler:x})})]})})}},2352:function(e,n){n.Z={wrap:"sign-in-form_wrap__uyA1X",block:"sign-in-form_block__sFmMD",invalid:"sign-in-form_invalid__Fj2iK",inputs:"sign-in-form_inputs__MVwqR","input-field":"sign-in-form_input-field__tLrji"}}}]);
//# sourceMappingURL=7.9667cc5c.chunk.js.map
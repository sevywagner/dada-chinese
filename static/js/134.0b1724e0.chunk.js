"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[134],{6698:function(e,n,t){var r=t(184);n.Z=function(e){var n=e.onUpload,t=e.num;return(0,r.jsx)("input",{type:"file",onChange:function(e){return n(e,t)}})}},4134:function(e,n,t){t.r(n);var r=t(3433),a=t(7762),o=t(9439),i=t(2791),l=t(7689),s=t(2845),c=t(7172),u=t(2352),d=t(3264),f=t(6698),p=t(184);n.default=function(){var e=(0,i.useState)([null]),n=(0,o.Z)(e,2),t=n[0],h=n[1],m=(0,i.useState)(),_=(0,o.Z)(m,2),g=_[0],x=_[1],j=(0,l.s0)(),b=(0,i.useRef)(),v=(0,i.useRef)(),Z=(0,i.useRef)(),w=function(e,n){h((function(t){return t[n-1]=e.target.files[0],t}))},k=(0,i.useState)([1]),N=(0,o.Z)(k,2),y=N[0],A=N[1];return(0,i.useEffect)((function(){h((function(e){return[].concat((0,r.Z)(e),[null])}))}),[y]),(0,p.jsxs)("div",{className:c.Z.root,children:[(0,p.jsx)("p",{className:d.Z.title,children:"New Blog Entry"}),(0,p.jsx)("a",{href:"https://dada-chinese-rest-api.herokuapp.com/auth/google",children:"Authenticate yourself"}),g&&(0,p.jsx)("p",{className:d.Z.error,children:g}),(0,p.jsxs)("form",{className:c.Z.form,onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("title",b.current.value),n.append("content",v.current.value);var r,o=(0,a.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.append("image",i)}}catch(s){o.e(s)}finally{o.f()}n.append("videoUrl",Z.current.value),n.append("date",(new Date).toDateString());var l=!1;fetch("http://localhost:8080/posts",{method:"POST",body:n,headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.ok||(l=!0),e.json()})).then((function(e){console.log(e),l?x(e.error):j("/blog")})).catch((function(e){return console.log(e)}))},children:[(0,p.jsxs)("div",{className:u.Z.block,children:[(0,p.jsx)("label",{children:"Title"}),(0,p.jsx)("input",{type:"text",ref:b})]}),(0,p.jsx)("div",{className:u.Z.block,children:y.map((function(e){return(0,p.jsx)(f.Z,{onUpload:w,num:e},e)}))}),(0,p.jsx)("button",{type:"button",onClick:function(){A((function(e){return[].concat((0,r.Z)(e),[e.length+1])}))},children:"Add another image"}),(0,p.jsxs)("div",{className:u.Z.block,children:[(0,p.jsx)("label",{children:"Video Url"}),(0,p.jsx)("input",{type:"text",ref:Z})]}),(0,p.jsxs)("div",{className:u.Z.block,children:[(0,p.jsx)("label",{children:"Content"}),(0,p.jsx)("textarea",{className:c.Z.textarea,ref:v})]}),(0,p.jsx)("div",{className:c.Z.center,children:(0,p.jsx)(s.Z,{type:"submit",children:"Add blog"})})]})]})}},2352:function(e,n){n.Z={wrap:"sign-in-form_wrap__uyA1X",block:"sign-in-form_block__sFmMD",invalid:"sign-in-form_invalid__Fj2iK",inputs:"sign-in-form_inputs__MVwqR","input-field":"sign-in-form_input-field__tLrji"}},7172:function(e,n){n.Z={form:"new-blog_form__igf5g",wrap:"new-blog_wrap__8K6mA",root:"new-blog_root__zNqEj",center:"new-blog_center__2s6Ox",textarea:"new-blog_textarea__URmiA"}}}]);
//# sourceMappingURL=134.0b1724e0.chunk.js.map
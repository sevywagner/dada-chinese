"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[307],{5452:function(e,t,c){c.d(t,{Z:function(){return h}});var s="checkout-item_item__ds-f5",r="checkout-item_wrap__xvNEG",n="checkout-item_title__Q75xj",a="checkout-item_price__Q4+Ir",i="checkout-item_quantity__R6c8N",o="checkout-item_section__Gu457",l="checkout-item_middle-section__Qunet",u="checkout-item_mid-wrap__KLH5b",d="checkout-item_half-section__WOtWb",m=c(184),h=function(e){var t=e.title,c=e.price,h=e.quantity,_=e.time;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:s,children:[(0,m.jsx)("section",{className:_?o:d,children:(0,m.jsx)("p",{className:n,children:t})}),(0,m.jsx)("section",{className:_?l:o,children:(0,m.jsxs)("div",{className:_?r:u,children:[h>1&&(0,m.jsxs)("p",{className:i,children:["x",h]}),c?(0,m.jsxs)("p",{className:a,children:["$",c]}):(0,m.jsx)("p",{className:a,children:"Price"})]})}),_&&(0,m.jsx)("section",{className:o,children:(0,m.jsxs)("div",{className:r,children:[(0,m.jsx)("p",{children:_.split(" ")[0]}),(0,m.jsx)("p",{children:_.split(" ")[1]})]})})]})})}},1307:function(e,t,c){c.r(t),c.d(t,{default:function(){return p}});var s=c(9439),r=c(2791),n=c(9434),a=c(7689),i=c(5452),o=c(1299),l=c(7558),u=c(184),d=function(e){var t=e.totalAmount,c=e.onApprove,s=(0,n.I0)(),r=(0,a.s0)();return(0,u.jsx)(o.Vv,{options:{"client-id":"Ac1clVxKT5oHSHUvC5UqagdiwxFpWC9dFK6XIUjPVY_7BxmAq7EhlT38AvJ6u0NcCJlOw1yDxo6K6Xdg"},children:(0,u.jsx)(o.ch,{createOrder:function(e,c){return c.order.create({purchase_units:[{description:"Credit for Dada Chinese Classes or Textbooks",amount:{currency_code:"USD",value:parseInt(t)}}]}).then((function(e){return e}))},onApprove:function(e,t){return t.order.capture().then((function(){c(),r("/order-confirmation"),s(l.U.resetCart({guest:null===localStorage.getItem("token")}))}))},onError:function(e){console.log(e)}})})},m=c(2845),h=c(3264),_={wrap:"checkout_wrap__qFQpx",form:"checkout_form__8VUDs",section:"checkout_section__IudwW",subtitle:"checkout_subtitle__74zhl",total:"checkout_total__8FLne",total__text:"checkout_total__text__LDVRi",summary:"checkout_summary__I3BxR","list-wrap":"checkout_list-wrap__f35ZQ","box-wrap":"checkout_box-wrap__HStVi",input:"checkout_input__nBZ9u","border-change":"checkout_border-change__cFH4P",credit:"checkout_credit__IWI6i",hover:"checkout_hover__LnPz9",text:"checkout_text__offQM"},p=(c(4644),function(){var e=(0,n.v9)((function(e){return e.cart})),t=(0,r.useState)(!1),c=(0,s.Z)(t,2),o=c[0],p=c[1],x=(0,r.useState)(),f=(0,s.Z)(x,2),j=f[0],k=f[1],v=(0,r.useState)(e.totalPrice),g=(0,s.Z)(v,2),N=g[0],I=g[1],y=e.items.findIndex((function(e){return"t1"===e.id})),S=((0,a.s0)(),(0,n.I0)()),w=(0,r.useRef)(),b=(0,r.useRef)(),C=(0,r.useRef)(),P=(0,r.useRef)(),A=function(e){if(e.preventDefault(),-1!==y&&""===w.current.value.trim()||!localStorage.getItem("token")&&(""===C.current.value.trim()||""===P.current.value.trim()))return k("Please fill out the entirety of the form");p((function(e){return!e}))};return(0,r.useEffect)((function(){I(e.totalPrice)}),[e.totalPrice]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:h.Z.title,children:"Checkout"}),(0,u.jsx)("div",{className:_.wrap,children:(0,u.jsxs)("div",{className:_["box-wrap"],children:[(0,u.jsxs)("div",{className:_["list-wrap"],children:[(0,u.jsx)("p",{className:_.summary,children:"Summary"}),e.items.map((function(e){return(0,u.jsx)(i.Z,{title:e.title,price:e.price,quantity:e.quantity,time:e.time},e.title)})),(0,u.jsxs)("div",{className:_.total,children:[(0,u.jsx)("p",{className:_.total__text,children:"Total:"}),(0,u.jsxs)("p",{className:_.total__text,children:["$",N]})]})]}),(0,u.jsxs)("div",{className:_.section,children:[j&&(0,u.jsx)("p",{className:h.Z.error,children:j}),(0,u.jsxs)("form",{className:_.form,onSubmit:A,children:[!localStorage.getItem("token")&&(0,u.jsxs)("div",{className:_.form__section,children:[(0,u.jsx)("p",{className:_.subtitle,children:"Basic Info"}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Name"}),(0,u.jsx)("input",{name:"name",className:_.input,type:"text",ref:C})]}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Email"}),(0,u.jsx)("input",{name:"email",className:_.input,type:"text",ref:P})]})]}),-1!==y&&(0,u.jsxs)("div",{className:_.form__section,children:[(0,u.jsx)("p",{className:_.subtitle,children:"Shipping Info"}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Address"}),(0,u.jsx)("input",{name:"address",className:_.input,type:"text",ref:w})]}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Apt # (optional)"}),(0,u.jsx)("input",{type:"text",className:_.input,ref:b})]})]}),(0,u.jsx)("div",{className:_.text,children:localStorage.getItem("token")&&-1===y&&(0,u.jsx)("p",{className:h.Z.title,children:"Thank you for choosing Dada Chinese!"})}),(0,u.jsx)("div",{className:_.wrap,children:o?0!==N&&(0,u.jsx)(d,{onApprove:function(){var t="";-1!==y&&(t=""!==b.current.value.trim()?w.current.value+" Apt #: "+b.current.value:w.current.value);var c=!1;localStorage.getItem("token")||P.current.value;var s=JSON.stringify({items:e.items,totalPrice:e.totalPrice,address:t}),r=JSON.stringify({items:e.items,totalPrice:e.totalPrice,address:t,name:localStorage.getItem("token")?"":C.current.value,email:localStorage.getItem("token")?"":P.current.value}),n={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")};fetch(null!==localStorage.getItem("token")?"https://dada-chinese-rest-api.herokuapp.com/shop/new-order":"https://dada-chinese-rest-api.herokuapp.com/shop/new-order-guest",{method:"PUT",body:null!==localStorage.getItem("token")?s:r,headers:null!==localStorage.getItem("token")?n:{"Content-Type":"application/json"}}).then((function(e){return e.ok||(c=!0),e.json()})).then((function(e){c?k(e.error):S(l.U.resetCart())})).catch((function(e){k(e.message),console.log(e)}))},totalAmount:N}):(0,u.jsx)(m.Z,{onClick:A,children:"Pay"})})]})]})]})})]})})}}]);
//# sourceMappingURL=307.1f6ea564.chunk.js.map
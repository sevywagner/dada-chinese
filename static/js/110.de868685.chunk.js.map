{"version":3,"file":"static/js/110.de868685.chunk.js","mappings":"iMA0GA,UAlGqB,WACnB,OAAwBA,EAAAA,EAAAA,YAAU,eAA3BC,EAAI,KAAEC,EAAO,KACdC,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,MAETC,GAAWC,EAAAA,EAAAA,UACXC,GAAaD,EAAAA,EAAAA,UACbE,GAAcF,EAAAA,EAAAA,UAGdG,GADQC,EAAAA,EAAAA,MACWC,MAAK,SAACC,GAAC,OAAKA,EAAEC,MAAQV,EAAOW,MAAM,IAuD5D,OACE,0BACE,gBAAKC,UAAWC,EAAAA,EAAAA,KAAY,UAC1B,kBAAMD,UAAWC,EAAAA,EAAAA,KAAaC,SAxDd,SAACC,GAGrB,IAAIC,EAFJD,EAAME,iBAKJD,EAD6B,KAA3Bd,EAASgB,QAAQC,MACXb,EAAWU,MAEXd,EAASgB,QAAQC,MAG3BC,QAAQC,IAAIhB,EAAYa,QAAQC,OAEhC,IASIG,EATEC,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAAST,GACzBO,EAASE,OAAO,WAAYnB,EAAWoB,UACvCH,EAASE,OAAO,QAAS7B,GACzB2B,EAASE,OAAO,WAAapB,EAAYa,QAAQC,MAA8Bd,EAAYa,QAAQC,MAA1Cb,EAAWqB,UACpEJ,EAASE,OAAO,UAAWrB,EAAWc,QAAQC,OAC9CI,EAASE,OAAO,OAAQnB,EAAWsB,MACnCL,EAASE,OAAO,KAAMnB,EAAWI,KAIjCmB,MAAM,wDAAyD,CAC7DC,OAAQ,MACRC,KAAMR,EACNS,QAAS,CACPC,cAAe,UAAYC,aAAaC,QAAQ,YAEjDC,MAAK,SAACC,GAOP,OANKA,EAAOC,IAGVhB,GAAe,EACfxB,EAAS,uBAHTwB,GAAe,EAKVe,EAAOE,MAChB,IAAGH,MAAK,SAACI,GACHlB,EACFF,QAAQC,IAAImB,EAAKC,SAEjBrB,QAAQC,IAAImB,EAAKE,MAErB,IAAGC,OAAM,SAACC,GACRxB,QAAQC,IAAIuB,EACd,GACF,EAS4D,WACpD,iBAAKhC,UAAWiC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,WACP,kBAAOC,KAAK,OAAOC,IAAK7C,EAAU8C,YAAa1C,EAAWU,YAE5D,iBAAKJ,UAAWiC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,WACP,kBAAOC,KAAK,OAAOG,SAdT,SAAClC,GACnBlB,EAAQkB,EAAMmC,OAAOC,MAAM,GAC7B,EAYmDC,K,iBAE3C,iBAAKxC,UAAWiC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,eACP,kBAAOC,KAAK,OAAOC,IAAK1C,QAE1B,iBAAKO,UAAWiC,EAAAA,EAAAA,MAAiB,WAC/B,2BAAO,aACP,qBACEjC,UAAWC,EAAAA,EAAAA,SACXkC,IAAK3C,EACLiD,aAAc/C,EAAWgD,cAG7B,gBAAK1C,UAAWC,EAAAA,EAAAA,OAAc,UAC5B,SAAC,IAAM,CAACiC,KAAK,SAAQ,SAAC,qBAMlC,C,qBCvGA,KAAgB,KAAO,2BAA2B,MAAQ,4BAA4B,QAAU,8BAA8B,OAAS,6BAA6B,cAAc,kC,qBCAlL,KAAgB,KAAO,uBAAuB,KAAO,uBAAuB,KAAO,uBAAuB,OAAS,yBAAyB,SAAW,2B","sources":["pages/admin/EditPostPage.js","webpack://dada-chinese/./src/components/sign-in/css/sign-in-form.module.css?61f8","webpack://dada-chinese/./src/pages/css/new-blog.module.css?fd2e"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\nimport { useLoaderData } from \"react-router\";\n\nimport Button from \"../../components/util/Button\";\nimport styles from \"./../css/new-blog.module.css\";\nimport formStyles from \"./../../components/sign-in/css/sign-in-form.module.css\";\n\nconst EditPostPage = () => {\n  const [file, setFile] = useState();\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const titleRef = useRef();\n  const contentRef = useRef();\n  const videoUrlRef = useRef();\n\n  const posts = useLoaderData();\n  const targetPost = posts.find((p) => p._id === params.postId);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    let title;\n\n    if (titleRef.current.value === \"\") {\n      title = targetPost.title;\n    } else {\n      title = titleRef.current.value;\n    }\n\n    console.log(videoUrlRef.current.value);\n\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"imageUrl\", targetPost.imageUrl);\n    formData.append(\"image\", file);\n    formData.append('videoUrl', !videoUrlRef.current.value ? targetPost.videoUrl : videoUrlRef.current.value);\n    formData.append(\"content\", contentRef.current.value);\n    formData.append(\"date\", targetPost.date);\n    formData.append(\"id\", targetPost._id);\n\n    let responseIsOk;\n\n    fetch(\"https://dada-chinese-rest-api.herokuapp.com/edit-post\", {\n      method: \"PUT\",\n      body: formData,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    }).then((result) => {\n      if (!result.ok) {\n        responseIsOk = false;\n      } else {\n        responseIsOk = true;\n        navigate(\"/dada-chinese/blog\");\n      }\n      return result.json();\n    }).then((data) => {\n      if (responseIsOk) {\n        console.log(data.message);\n      } else {\n        console.log(data.error);\n      }\n    }).catch((err) => {\n      console.log(err);\n    });\n  };\n\n  const fileHandler = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  return (\n    <div>\n      <div className={styles.root}>\n        <form className={styles.form} onSubmit={submitHandler}>\n          <div className={formStyles.block}>\n            <label>Title</label>\n            <input type=\"text\" ref={titleRef} placeholder={targetPost.title} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Image</label>\n            <input type=\"file\" onChange={fileHandler.bind(this)} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Video Url</label>\n            <input type=\"text\" ref={videoUrlRef} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Content</label>\n            <textarea\n              className={styles.textarea}\n              ref={contentRef}\n              defaultValue={targetPost.content}\n            ></textarea>\n          </div>\n          <div className={styles.center}>\n            <Button type=\"submit\">Add blog</Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default EditPostPage;","// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"sign-in-form_wrap__uyA1X\",\"block\":\"sign-in-form_block__sFmMD\",\"invalid\":\"sign-in-form_invalid__Fj2iK\",\"inputs\":\"sign-in-form_inputs__MVwqR\",\"input-field\":\"sign-in-form_input-field__tLrji\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"new-blog_form__igf5g\",\"wrap\":\"new-blog_wrap__8K6mA\",\"root\":\"new-blog_root__zNqEj\",\"center\":\"new-blog_center__2s6Ox\",\"textarea\":\"new-blog_textarea__URmiA\"};"],"names":["useState","file","setFile","navigate","useNavigate","params","useParams","titleRef","useRef","contentRef","videoUrlRef","targetPost","useLoaderData","find","p","_id","postId","className","styles","onSubmit","event","title","preventDefault","current","value","console","log","responseIsOk","formData","FormData","append","imageUrl","videoUrl","date","fetch","method","body","headers","Authorization","localStorage","getItem","then","result","ok","json","data","message","error","catch","err","formStyles","type","ref","placeholder","onChange","target","files","bind","defaultValue","content"],"sourceRoot":""}
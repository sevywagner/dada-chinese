"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[492],{3492:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}});var r=t(3433),a=t(7762),o=t(9439),i=t(2791),s=t(7689),l=t(2845),c=t(7172),u=t(2352),d=t(3264),f=t(184),p=function(e){var n=e.onUpload,t=e.num;return(0,f.jsx)("input",{type:"file",onChange:function(e){return n(e,t)}})},h=function(){var e=(0,i.useState)([null]),n=(0,o.Z)(e,2),t=n[0],h=n[1],m=(0,i.useState)(),_=(0,o.Z)(m,2),g=_[0],x=_[1],j=(0,s.s0)(),b=(0,i.useRef)(),v=(0,i.useRef)(),Z=(0,i.useRef)(),k=function(e,n){h((function(t){return t[n-1]=e.target.files[0],t}))},w=(0,i.useState)([1]),N=(0,o.Z)(w,2),y=N[0],A=N[1];return(0,i.useEffect)((function(){h((function(e){return[].concat((0,r.Z)(e),[null])})),console.log(t)}),[y]),(0,f.jsxs)("div",{className:c.Z.root,children:[(0,f.jsx)("p",{className:d.Z.title,children:"New Blog Entry"}),(0,f.jsx)("a",{href:"https://dada-chinese-rest-api.herokuapp.com/auth/google",children:"Authenticate yourself"}),g&&(0,f.jsx)("p",{className:d.Z.error,children:g}),(0,f.jsxs)("form",{className:c.Z.form,onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("title",b.current.value),n.append("content",v.current.value);var r,o=(0,a.Z)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.append("image",i)}}catch(l){o.e(l)}finally{o.f()}n.append("videoUrl",Z.current.value),n.append("date",(new Date).toDateString());var s=!1;fetch("https://dada-chinese-rest-api.herokuapp.com/posts",{method:"POST",body:n,headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.ok||(s=!0),e.json()})).then((function(e){console.log(e),s?x(e.error):j("/blog")})).catch((function(e){return console.log(e)}))},children:[(0,f.jsxs)("div",{className:u.Z.block,children:[(0,f.jsx)("label",{children:"Title"}),(0,f.jsx)("input",{type:"text",ref:b})]}),(0,f.jsx)("div",{className:u.Z.block,children:y.map((function(e){return(0,f.jsx)(p,{onUpload:k,num:e},e)}))}),(0,f.jsx)("button",{type:"button",onClick:function(){A((function(e){return[].concat((0,r.Z)(e),[e.length+1])}))},children:"Add another image"}),(0,f.jsxs)("div",{className:u.Z.block,children:[(0,f.jsx)("label",{children:"Video Url"}),(0,f.jsx)("input",{type:"text",ref:Z})]}),(0,f.jsxs)("div",{className:u.Z.block,children:[(0,f.jsx)("label",{children:"Content"}),(0,f.jsx)("textarea",{className:c.Z.textarea,ref:v})]}),(0,f.jsx)("div",{className:c.Z.center,children:(0,f.jsx)(l.Z,{type:"submit",children:"Add blog"})})]})]})}},2352:function(e,n){n.Z={wrap:"sign-in-form_wrap__uyA1X",block:"sign-in-form_block__sFmMD",invalid:"sign-in-form_invalid__Fj2iK",inputs:"sign-in-form_inputs__MVwqR","input-field":"sign-in-form_input-field__tLrji"}},7172:function(e,n){n.Z={form:"new-blog_form__igf5g",wrap:"new-blog_wrap__8K6mA",root:"new-blog_root__zNqEj",center:"new-blog_center__2s6Ox",textarea:"new-blog_textarea__URmiA"}}}]);
//# sourceMappingURL=492.75dd8f84.chunk.js.map
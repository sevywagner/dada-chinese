{"version":3,"file":"static/js/110.8880c97d.chunk.js","mappings":"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","sources":["components/blog/ImageUpload.js","pages/admin/EditPostPage.js","webpack://dada-chinese/./src/components/sign-in/css/sign-in-form.module.css?61f8","webpack://dada-chinese/./src/pages/css/new-blog.module.css?fd2e"],"sourcesContent":["const ImageUpload = ({ onUpload, num }) => {\n    return (\n        <input type=\"file\" onChange={(event) => onUpload(event, num)} />\n    );\n}\n\nexport default ImageUpload;","import { useRef, useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router\";\nimport { useLoaderData } from \"react-router\";\n\nimport Button from \"../../components/util/Button\";\nimport styles from \"./../css/new-blog.module.css\";\nimport mainStyles from './../../components/main.module.css';\nimport formStyles from \"./../../components/sign-in/css/sign-in-form.module.css\";\nimport ImageUpload from \"../../components/blog/ImageUpload\";\n\nconst EditPostPage = () => {\n  const [files, setFiles] = useState([null]);\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const titleRef = useRef();\n  const contentRef = useRef();\n  const videoUrlRef = useRef();\n\n  const posts = useLoaderData();\n  const targetPost = posts.find((p) => p._id === params.postId);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n\n    let title;\n\n    if (titleRef.current.value === \"\") {\n      title = targetPost.title;\n    } else {\n      title = titleRef.current.value;\n    }\n\n    console.log(videoUrlRef.current.value);\n\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"imageWebContentLinks\", targetPost.imageWebContentLinks);\n    for (const image of files) {\n      formData.append('image', image);\n    }\n    formData.append('videoUrl', !videoUrlRef.current.value ? targetPost.videoUrl : videoUrlRef.current.value);\n    formData.append(\"content\", contentRef.current.value);\n    formData.append(\"date\", targetPost.date);\n    formData.append(\"id\", targetPost._id);\n\n    let responseIsOk;\n\n    fetch(\"https://dada-chinese-rest-api.herokuapp.com/edit-post\", {\n      method: \"PUT\",\n      body: formData,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    }).then((result) => {\n      if (!result.ok) {\n        responseIsOk = false;\n      } else {\n        responseIsOk = true;\n        navigate(\"/blog\");\n      }\n      return result.json();\n    }).then((data) => {\n      if (responseIsOk) {\n        console.log(data.message);\n      } else {\n        console.log(data.error);\n      }\n    }).catch((err) => {\n      console.log(err);\n    });\n  };\n\n  const fileHandler = (event, num) => {\n    setFiles((prevState) => {\n      prevState[num - 1] = event.target.files[0];\n      return prevState;\n    });\n  }\n\n  const [amountOfImages, setAmountOfImages] = useState([1]);\n\n  const addImageHandler = () => {\n      setAmountOfImages((prevState) => [...prevState, prevState.length + 1]);\n  }\n\n  useEffect(() => {\n      setFiles((prevState) => [...prevState, null]);\n  }, [amountOfImages]);\n\n  return (\n    <div>\n      <div className={styles.root}>\n        <p className={mainStyles.title}>Edit Blog</p>\n        <form className={styles.form} onSubmit={submitHandler}>\n          <div className={formStyles.block}>\n            <label>Title</label>\n            <input type=\"text\" ref={titleRef} placeholder={targetPost.title} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Image</label>\n            {amountOfImages.map((num) => <ImageUpload key={num} onUpload={fileHandler} num={num} />)}\n            <button type=\"button\" onClick={addImageHandler}>Add image</button>\n          </div>\n          <div className={formStyles.block}>\n            <label>Video Url</label>\n            <input type=\"text\" ref={videoUrlRef} />\n          </div>\n          <div className={formStyles.block}>\n            <label>Content</label>\n            <textarea\n              className={styles.textarea}\n              ref={contentRef}\n              defaultValue={targetPost.content}\n            ></textarea>\n          </div>\n          <div className={styles.center}>\n            <Button type=\"submit\">Add blog</Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default EditPostPage;","// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"sign-in-form_wrap__uyA1X\",\"block\":\"sign-in-form_block__sFmMD\",\"invalid\":\"sign-in-form_invalid__Fj2iK\",\"inputs\":\"sign-in-form_inputs__MVwqR\",\"input-field\":\"sign-in-form_input-field__tLrji\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"new-blog_form__igf5g\",\"wrap\":\"new-blog_wrap__8K6mA\",\"root\":\"new-blog_root__zNqEj\",\"center\":\"new-blog_center__2s6Ox\",\"textarea\":\"new-blog_textarea__URmiA\"};"],"names":["onUpload","num","type","onChange","event","useState","files","setFiles","navigate","useNavigate","params","useParams","titleRef","useRef","contentRef","videoUrlRef","targetPost","useLoaderData","find","p","_id","postId","fileHandler","prevState","target","amountOfImages","setAmountOfImages","useEffect","className","styles","mainStyles","onSubmit","title","preventDefault","current","value","console","log","formData","FormData","append","imageWebContentLinks","responseIsOk","image","videoUrl","date","fetch","method","body","headers","Authorization","localStorage","getItem","then","result","ok","json","data","message","error","catch","err","formStyles","ref","placeholder","map","onClick","length","defaultValue","content"],"sourceRoot":""}
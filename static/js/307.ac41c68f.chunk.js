"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[307],{5452:function(e,t,s){s.d(t,{Z:function(){return h}});var c="checkout-item_item__ds-f5",r="checkout-item_wrap__xvNEG",n="checkout-item_title__Q75xj",i="checkout-item_price__Q4+Ir",a="checkout-item_quantity__R6c8N",o="checkout-item_section__Gu457",l="checkout-item_middle-section__Qunet",u="checkout-item_mid-wrap__KLH5b",d="checkout-item_half-section__WOtWb",m=s(184),h=function(e){var t=e.title,s=e.price,h=e.quantity,_=e.time;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("section",{className:_?o:d,children:(0,m.jsx)("p",{className:n,children:t})}),(0,m.jsx)("section",{className:_?l:o,children:(0,m.jsxs)("div",{className:_?r:u,children:[h>1&&(0,m.jsxs)("p",{className:a,children:["x",h]}),s?(0,m.jsxs)("p",{className:i,children:["$",s]}):(0,m.jsx)("p",{className:i,children:"Price"})]})}),_&&(0,m.jsx)("section",{className:o,children:(0,m.jsxs)("div",{className:r,children:[(0,m.jsx)("p",{children:_.split(" ")[0]}),(0,m.jsx)("p",{children:_.split(" ")[1]})]})})]})})}},1307:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var c=s(9439),r=s(2791),n=s(9434),i=s(7689),a=s(5452),o=s(1299),l=s(7558),u=s(184),d=function(e){var t=e.totalAmount,s=e.onApprove,c=(0,n.I0)(),r=(0,i.s0)();return(0,u.jsx)(o.Vv,{options:{"client-id":{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_PAYPAL_CLIENT_ID},children:(0,u.jsx)(o.ch,{createOrder:function(e,s){return s.order.create({purchase_units:[{description:"Credit for Dada Chinese Classes or Textbooks",amount:{currency_code:"USD",value:parseInt(t)}}]}).then((function(e){return e}))},onApprove:function(e,t){return t.order.capture().then((function(){s(),r("/order-confirmation"),c(l.U.resetCart({guest:null===localStorage.getItem("token")}))}))},onError:function(e){console.log(e)}})})},m=s(2845),h=s(3264),_={wrap:"checkout_wrap__qFQpx",form:"checkout_form__8VUDs",section:"checkout_section__IudwW",subtitle:"checkout_subtitle__74zhl",total:"checkout_total__8FLne",total__text:"checkout_total__text__LDVRi",summary:"checkout_summary__I3BxR","list-wrap":"checkout_list-wrap__f35ZQ","box-wrap":"checkout_box-wrap__HStVi",input:"checkout_input__nBZ9u","border-change":"checkout_border-change__cFH4P",credit:"checkout_credit__IWI6i",hover:"checkout_hover__LnPz9",text:"checkout_text__offQM"},p=(s(4644),function(){var e=(0,n.v9)((function(e){return e.cart})),t=(0,r.useState)(!1),s=(0,c.Z)(t,2),o=s[0],p=s[1],x=(0,r.useState)(),f=(0,c.Z)(x,2),j=f[0],k=f[1],v=(0,r.useState)(e.totalPrice),N=(0,c.Z)(v,2),g=N[0],S=N[1],I=e.items.findIndex((function(e){return"t1"===e.id})),y=((0,i.s0)(),(0,n.I0)()),P=(0,r.useRef)(),C=(0,r.useRef)(),w=(0,r.useRef)(),b=(0,r.useRef)(),A=function(e){if(e.preventDefault(),-1!==I&&""===P.current.value.trim()||!localStorage.getItem("token")&&(""===w.current.value.trim()||""===b.current.value.trim()))return k("Please fill out the entirety of the form");p((function(e){return!e}))};return(0,r.useEffect)((function(){S(e.totalPrice)}),[e.totalPrice]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:h.Z.title,children:"Checkout"}),(0,u.jsx)("div",{className:_.wrap,children:(0,u.jsxs)("div",{className:_["box-wrap"],children:[(0,u.jsxs)("div",{className:_["list-wrap"],children:[(0,u.jsx)("p",{className:_.summary,children:"Summary"}),e.items.map((function(e){return(0,u.jsx)(a.Z,{title:e.title,price:e.price,quantity:e.quantity,time:e.time},e.title)})),(0,u.jsxs)("div",{className:_.total,children:[(0,u.jsx)("p",{className:_.total__text,children:"Total:"}),(0,u.jsxs)("p",{className:_.total__text,children:["$",g]})]})]}),(0,u.jsxs)("div",{className:_.section,children:[j&&(0,u.jsx)("p",{className:h.Z.error,children:j}),(0,u.jsxs)("form",{className:_.form,onSubmit:A,children:[!localStorage.getItem("token")&&(0,u.jsxs)("div",{className:_.form__section,children:[(0,u.jsx)("p",{className:_.subtitle,children:"Basic Info"}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Name"}),(0,u.jsx)("input",{name:"name",className:_.input,type:"text",ref:w})]}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Email"}),(0,u.jsx)("input",{name:"email",className:_.input,type:"text",ref:b})]})]}),-1!==I&&(0,u.jsxs)("div",{className:_.form__section,children:[(0,u.jsx)("p",{className:_.subtitle,children:"Shipping Info"}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Address"}),(0,u.jsx)("input",{name:"address",className:_.input,type:"text",ref:P})]}),(0,u.jsxs)("fieldset",{children:[(0,u.jsx)("legend",{children:"Apt # (optional)"}),(0,u.jsx)("input",{type:"text",className:_.input,ref:C})]})]}),(0,u.jsx)("div",{className:_.text,children:localStorage.getItem("token")&&-1===I&&(0,u.jsx)("p",{className:h.Z.title,children:"Thank you for choosing Dada Chinese!"})}),(0,u.jsx)("div",{className:_.wrap,children:o?0!==g&&(0,u.jsx)(d,{onApprove:function(){var t="";-1!==I&&(t=""!==C.current.value.trim()?P.current.value+" Apt #: "+C.current.value:P.current.value);var s=!1;localStorage.getItem("token")||b.current.value;var c=JSON.stringify({items:e.items,totalPrice:e.totalPrice,address:t}),r=JSON.stringify({items:e.items,totalPrice:e.totalPrice,address:t,name:localStorage.getItem("token")?"":w.current.value,email:localStorage.getItem("token")?"":b.current.value}),n={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")};fetch(null!==localStorage.getItem("token")?"https://dada-chinese-rest-api.herokuapp.com/shop/new-order":"https://dada-chinese-rest-api.herokuapp.com/shop/new-order-guest",{method:"PUT",body:null!==localStorage.getItem("token")?c:r,headers:null!==localStorage.getItem("token")?n:{"Content-Type":"application/json"}}).then((function(e){return e.ok||(s=!0),e.json()})).then((function(e){s?k(e.error):y(l.U.resetCart())})).catch((function(e){k(e.message),console.log(e)}))},totalAmount:g}):(0,u.jsx)(m.Z,{onClick:A,children:"Pay"})})]})]})]})})]})})}}]);
//# sourceMappingURL=307.ac41c68f.chunk.js.map
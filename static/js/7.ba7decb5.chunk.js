"use strict";(self.webpackChunkdada_chinese=self.webpackChunkdada_chinese||[]).push([[7],{6007:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var s=a(9439),r=a(3264),i="sign-in_root__97RE8",l="sign-in_elevate__vTr2y",t="sign-in_form__Cuhq7",o="sign-in_reset__25dhf",d=a(2791),c=a(4347),u=a(7689),h=a(2352),m=a(2845),p=a(184),f=function(){var e=(0,d.useState)(),n=(0,s.Z)(e,2),a=n[0],r=n[1],i=(0,u.s0)(),l=(0,d.useContext)(c.g),t=(0,d.useRef)(),o=(0,d.useRef)();return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{className:h.Z.form,onSubmit:function(e){var n;e.preventDefault(),fetch("https://dada-chinese-rest-api.herokuapp.com/auth/login",{method:"POST",body:JSON.stringify({email:t.current.value,password:o.current.value}),headers:{"Content-Type":"application/json"}}).then((function(e){return n=!!e.ok,e.json()})).then((function(e){if(!n)return r(e.error);l.loginHandler(e.token,e.expiration),i("/dada-chinese")})).catch((function(e){console.log(e.message)}))},children:[a&&(0,p.jsx)("p",{children:a}),(0,p.jsxs)("div",{className:h.Z.inputs,children:[(0,p.jsxs)("div",{className:h.Z.block,children:[(0,p.jsx)("label",{children:"Email"}),(0,p.jsx)("input",{type:"text",ref:t})]}),(0,p.jsxs)("div",{className:h.Z.block,children:[(0,p.jsx)("label",{children:"Password"}),(0,p.jsx)("input",{type:"password",ref:o})]})]}),(0,p.jsx)(m.Z,{type:"submit",children:"Log in"})]})})},v=a(270),j=function(e){var n=e.errorHandler,a=(0,u.s0)(),s=(0,v.Z)((function(e){return""!==e.trim()})),r=s.value,i=s.isValid,l=s.hasError,t=s.valueChangeHandler,o=s.blurHandler,d=s.reset,c=(0,v.Z)((function(e){return e.includes("@")})),f=c.value,j=c.isValid,x=c.hasError,g=c.valueChangeHandler,b=c.blurHandler,_=c.reset,w=(0,v.Z)((function(e){return e.trim().length>=8})),Z=w.value,N=w.isValid,y=w.hasError,C=w.valueChangeHandler,k=w.blurHandler,H=w.reset,S=(0,v.Z)((function(e){return""!==e.trim()})),E=S.value,P=S.isValid,F=S.hasError,T=S.valueChangeHandler,R=S.blurHandler,V=S.reset,B={name:l?h.Z.invalid:"",email:x?h.Z.invalid:"",password:y?h.Z.invalid:"",password2:F?h.Z.invalid:""};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("form",{onSubmit:function(e){var s;(e.preventDefault(),i)?j?N?i&&j&&N&&P?fetch("https://dada-chinese-rest-api.herokuapp.com/auth/signup",{method:"PUT",body:JSON.stringify({name:r,email:f,password:Z,confirmPassword:E}),headers:{"Content-Type":"application/json"}}).then((function(e){return s=!!e.ok,e.json()})).then((function(e){if(!s)return n(e.error);d(),_(),H(),V(),n(null),a("/dada-chinese/sign-in")})).catch((function(e){console.log(e)})):n("Invalid Credentials"):n("Please enter a valid password"):n("Please enter a valid email"):n("Please enter a valid email")},children:[(0,p.jsx)("label",{className:h.Z.label,children:"Name"}),(0,p.jsx)("input",{className:B.name,type:"text",onChange:t,onBlur:o,value:r,name:"name",placeholder:"Full name"}),(0,p.jsx)("label",{className:h.Z.label,children:"Email"}),(0,p.jsx)("input",{className:B.email,type:"text",onChange:g,onBlur:b,value:f,name:"email",placeholder:"test@test.com"}),(0,p.jsx)("label",{className:h.Z.label,children:"Set password"}),(0,p.jsx)("input",{className:B.password,type:"password",onChange:C,onBlur:k,value:Z,name:"password",placeholder:"Must be 8 characters and include a number"}),(0,p.jsx)("label",{className:h.Z.label,children:"Confirm password"}),(0,p.jsx)("input",{className:B.password,type:"password",onChange:T,onBlur:R,value:E,name:"password2"}),(0,p.jsx)(m.Z,{className:h.Z.submit,type:"submit",children:"Submit"})]})})},x=a(1087),g=function(e){var n=e.mode,a=(0,u.TH)(),c=(0,d.useState)(),h=(0,s.Z)(c,2),m=h[0],v=h[1],g=function(e){v(e)};return(0,d.useEffect)((function(){v(null)}),[a.pathname]),(0,p.jsx)("div",{className:i,children:(0,p.jsxs)("div",{className:l,children:[(0,p.jsxs)("p",{className:r.Z.title,children:["Sign ","register"===n?"up":"in"]}),m&&(0,p.jsx)("p",{children:m}),"login"===n&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:t,children:(0,p.jsx)(f,{errorHandler:g})}),(0,p.jsx)(x.rU,{className:o,to:"/dada-chinese/reset-password",children:"Reset Password"})]}),"register"===n&&(0,p.jsx)("div",{className:t,children:(0,p.jsx)(j,{errorHandler:g})})]})})}},2352:function(e,n){n.Z={wrap:"sign-in-form_wrap__uyA1X",block:"sign-in-form_block__sFmMD",invalid:"sign-in-form_invalid__Fj2iK",inputs:"sign-in-form_inputs__MVwqR","input-field":"sign-in-form_input-field__tLrji"}}}]);
//# sourceMappingURL=7.ba7decb5.chunk.js.map